<!DOCTYPE html>
<html dir="ltr" lang="en-US">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width", initial-scale="1">
      <title>ECM monitoring</title>
      <link rel="stylesheet" href="css/bootstrap.css">
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      
      <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
      <link href="http://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
      <link rel="stylesheet" type="text/css" media="all" href="daterangepicker-bs3.css" />
      <link rel="stylesheet" href="css/custom-style.css">
      <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="moment.js"></script>
      <script type="text/javascript" src="daterangepicker.js"></script>

      <script type="text/javascript" src="js/bootstrap.js"></script>

      <!--dropdown!!!!!!!!!!-->
      <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script> 
 <script>
function load_cgi(sy_, sm_, sd_, ey_, em_, ed_, file, id) {
	var jv = {sy : sy_, sm : sm_, sd : sd_, 
			  ey : ey_, em : em_, ed : ed_, fn : file};
	$.post('inzent.cgi', jv, function(data,status) {
		$(id).html(data);
	})
}
Date.prototype.addDays = function(days) {
    var dat = new Date(this.valueOf());
    dat.setDate(dat.getDate() + days);
    return dat;
}
$(document).ready( function() {      
	var today=new Date();
	var ey = today.getFullYear();
	var em = today.getMonth();
	var ed = today.getDate();
	var prev = today.addDays(-60);
	var sy = prev.getFullYear();
	var sm = prev.getMonth() + 1;
	var sd = prev.getDate();
	load_cgi(ey-1, em, 0, ey, em, 0, '', '#1');//지난 12개월간통계
	load_cgi(ey, em, 0, ey, em, 0, '', '#2');//금월 한달
	load_cgi(sy, sm, sd, ey, em, ed, '', '#3');//지난 30일간 통계
	load_cgi(ey, em, ed, ey, em, ed, '', '#4');//금일
	load_cgi(ey-1, em, 0, ey, em, 0, '', '#6');//사용자 설정
	load_cgi(ey-1, em, 0, ey, em, 0, '', '#7');
	$(document).ready( function() {
		var jv={kind : "pie"};
		$.post('pie.cgi', jv, function(data, status) {
			$('#5').html(data);
		})
	});
});
</script>

   </head>

   <body>
    <style type="text/css">
      .jumbotron {
        background-image: url('ECM.jpg');
        background-size: cover;
        text-shadow: black 0.2em 0.2em 0.2em;
        color: #2c7bdc;
      }
    </style>

    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
            data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Coding Is Coming</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">

          </ul>
        </div>
      </div>
    </nav>


      <div class="container">
        <div class="jumbotron">
          <h1 class="text-center">ECM monitoring system</h1>
          <hr />
          <h3> INZENT </h3>
          <h5> Coding is coming 5조 </h5>
          <p class="text-right"><a class="btn btn-primary btn-lg" href="index.html" role="button">초기화</a></p>

        </div>
      </div>

      <div class="container" style="width:100%; height:1060px;">
         <div class="span12">


            <div class="well well-sm" style="height:1050px;">
              <div class="col-md-6" style='border:3px solid gold; float:left; text-align: center'>지난 12개월간 사용량</div>
              <div class="col-md-6" style='border:3px solid gold; float:left; text-align: center'>금월 사용량</div>
              <div title="지난 12개월간 통계" class="col-md-6" id="1" style='height:500px; border:3px solid gold; float:left; text-align: center'></div>
              <div class="col-md-6" id="2" style='height:500px; border:3px solid gold; float:left; text-align: center'></div>
              <div class="col-md-6" style='border:3px solid gold; float:left; text-align: center'>지난 30일간 사용량</div>
              <div class="col-md-6" style='border:3px solid gold; float:left; text-align: center'>금일 사용량</div>
              <div class="col-md-6" id="3" style='height:500px; border:3px solid gold; float:left; text-align: center'></div>
              <div class="col-md-6" id="4" style='height:500px; border:3px solid gold; float:left; text-align: center'></div>
            <hr />
            </div>
          </div>
        </div>


  <div class="container" style="width:100%; height:1060px;">
    <h1 class="text-center">전체 등록건수 통계</h1>
    <hr />
    <div class="well well-sm" style="height:950px;">
     <select id="kindd">
     <option value="pie">pie</option>
     <option value="bar">bar</option>
     </select>

     <script type="text/javascript">
       $(document).ready(function () {
         $('#kindd').change(function () {
                var jv2 = {kind: $(":selected").text()};
                $.post('pie.cgi', jv2, function(data, status) {
                  $('#5').html(data);
                 })
         });
       });
      </script>

     <div id="5"></div>
    </div>
  </div>


      <div class="container" style="width:100%; height:1060px;">
         <div class="span12">

          <h1 class="text-center">사용자 설정 기간 사용량 통계</h1>
          <hr />
            <div class="well well-sm" style="width:100%; height:950px;">

            <h4>기간 설정</h4>
              <form class="form-horizontal">
                 <fieldset>
                  <div class="control-group">
                    <div class="controls">
                     
                     <div class="input-prepend input-group" style='width:1150px; height:37px; border:3px solid gold; float:left; text-align: center'>
                      <span class="add-on input-group-addon">
                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                      </span>
                      그래프1
                      <input type="text" style="width: 200px" name="daterange1" id="daterange1" class="form-control" value="10/16/2017 - 10/23/2017" />
                     </div>
                     
                     <div class="input-prepend input-group" style='width:1150px; height:37px; border:3px solid gold; text-align: center'>
                      <span class="add-on input-group-addon">
                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                      </span>
                      그래프2
                      <input type="text" style="width: 200px" name="daterange2" id="daterange2" class="form-control" value="10/16/2017 - 10/23/2017" />
                     </div>

                     <div id="6" class="col-md-6" style='height:500px; border:3px solid gold; float:left; text-align: center'></div>
                     <div id="7" class="col-md-6" style='height:500px; border:3px solid gold; float:left; text-align: center'></div>

                    </div>
                  </div>
                 </fieldset>
               </form>

               <script type="text/javascript">
               $(document).ready(function() {
                  $('#daterange1').daterangepicker(null, function(start, end, label) {
                    console.log(start.toISOString(), end.toISOString(), label);
                    var jv2 = {sy : String(start).split(" ")[3],
                       sm : String(start).split(" ")[1],
                       sd : String(start).split(" ")[2],
                       ey : String(end).split(" ")[3],
                       em : String(end).split(" ")[1],
                       ed : String(end).split(" ")[2],
                       file : ""};
                    $.post('inzent.cgi', jv2, function(data, status) {
                $('#6').html(data);
            })
                  });
               });

               $(document).ready(function() {
                  $('#daterange2').daterangepicker(null, function(start, end, label) {
                    console.log(start.toISOString(), end.toISOString(), label);
                    var jv3 = {sy : String(start).split(" ")[3],
                       sm : String(start).split(" ")[1],
                       sd : String(start).split(" ")[2],
                       ey : String(end).split(" ")[3],
                       em : String(end).split(" ")[1],
                       ed : String(end).split(" ")[2],
                       file : ""};
                    $.post('/cgi-bin/inzent.cgi', jv3, function(data, status) {
                $('#7').html(data);
            })
                  });
               });

               </script>
            </div>
         </div>
      </div>



      <footer style="background-color: #000000; color: #ffffff">
        <div class="container">
          <br>
          <div class="row">
            <div class="col-sm-7" style="text-align: left;"><h5>동국대 ICIP 2017</h5><h5>INZENT & CIC</h5></div>
            <div class="col-sm-2"><h4>INZENT</h4><p>한상훈</p></div>
            <div class="col-sm-3"><h4>CIC</h4><p>강백진, 이희선, 정석현, 박승원</p></div>
          </div>
        </div>
      </footer>

   </body>
</html>
